<div class="container">
    <h3>Horas presupuestadas</h3>

    <div class="accordion" id="accordionTablaHorasPropuestas">
            
        <div class="card"*ngFor="let year of mantoInformeSemanalConfService.getHorasPropuestasYears()" >
            <div class="card-header" id="headingTablaHoras{{year}}">
                <h2 class="mb-0">
                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" attr.data-target="#collapseTablaHoras{{year}}" aria-expanded="false" attr.aria-controls="collapseTablaHoras{{year}}">
                        Año {{year}}
                    </button>
                </h2>
            </div>
        
            <div id="collapseTablaHoras{{year}}" class="collapse" attr.aria-labelledby="headingTablaHoras{{year}}" attr.data-parent="#accordionTablaHorasPropuestas">
                <div class="card-body">                    
                    
                    <table class="table table-striped table-bordered">
                        <thead class="bg-dark">
                            <tr>
                                <th class="small font-weight-bold text-light" scope="col">Mes</th>
                                <th class="small font-weight-bold text-light" scope="col">Horas</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let mes of mantoInformeSemanalConfService.getMonthNames(); let i=index">
                                <td class="small">{{mes}}</td>
                                <td class="small">
                                    <div *ngIf="mantoInformeSemanalConfService.getHorasPropuestasValor(year, i+1) > 0; else noValorHoraPropuesta">
                                        <input type="number" class="form-control" value="{{mantoInformeSemanalConfService.getHorasPropuestasValor(year, i+1)}}" id="inputHoraPropuestas{{year}}{{i+1}}" />
                                    </div>
                                    <ng-template #noValorHoraPropuesta>
                                           0
                                    </ng-template>
                                </td>
                                <td class="MantoHorasConfAcciones">
                                    <div *ngIf="mantoInformeSemanalConfService.getHorasPropuestasValor(year, i+1) > 0">
                                        <button class="btn" type="button" (click)="modificarHora(year, i+1, false)">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                    </div>
                                </td>
                                
                                <td class="MantoHorasConfAcciones">
                                    <div *ngIf="mantoInformeSemanalConfService.getHorasPropuestasValor(year, i+1) > 0">       
                                        <button class="btn" type="button" (click)="borrarHora(year, i+1, false)">
                                            <i class="fas fa-trash-alt"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr> 
                        </tbody>
                    </table>

                    
                </div>
            </div>
        </div>
    </div>

    <hr>
    
    <div class="row justify-content-center">
        <div class="col-12 col-sm-6 ">
            <div class="row">
                <div class="col ">
                    <h4>Agregar Hora Propuesta</h4>
                </div>
            </div>
            
            <form autocomplete="off" [formGroup]="formularioHoraPropuesta" (ngSubmit)="agregarHoraPropuesta()">
                <div class="row my-3">
                    <div class="col-12 col-sm-4">
                        Fecha:
                    </div>
                    <div class="col-12 col-sm-8">
                        <input [class.is-invalid]="mesHoraPropuestaNoValido" formControlName="mesHoraPropuesta" type="month" class="date form-control" min="{{fechaMinPropuestas}}" max="{{fechaMaxPropuestas}}">
                        <small *ngIf="mesHoraPropuestaNoValido" class="text-danger">Seleccione Fecha</small>
                    </div>
                </div>
 
                <div class="row my-3">
                    <div class="col-12 col-sm-4">
                        Valor:
                    </div>
                    <div class="col-12 col-sm-8">
                        <input [class.is-invalid]="valorHoraPropuestaNoValido" formControlName="valorHoraPropuesta" type="number" class="form-control" >
                        <small *ngIf="valorHoraPropuestaNoValido" class="text-danger">Debe ingresar un valor</small>
                    </div>
                </div>
           
                <div class="row my-3 mt-5">
                    <div class="col">
                        <button class="btn btn-primary btn-block" type="submit">Agregar</button>
                    </div>
                </div>
            </form>

        </div>
    </div>
    
    <hr>

    <h3>Horas utilizadas históricas</h3>

    <div class="accordion" id="accordionTablaHistorica">            
        <div class="card"*ngFor="let year of mantoInformeSemanalConfService.getHorasUtilizadasYears()" >
            <div class="card-header" id="headingTablaHistorica{{year}}">
                <h2 class="mb-0">
                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" attr.data-target="#collapseTablaHistorica{{year}}" aria-expanded="false" attr.aria-controls="collapseTablaHistorica{{year}}">
                        Año {{year}}
                    </button>
                </h2>
            </div>
        
            <div id="collapseTablaHistorica{{year}}" class="collapse" attr.aria-labelledby="headingTablaHistorica{{year}}" attr.data-parent="#accordionTablaHistorica">
                <div class="card-body">
                    <table class="table table-striped table-bordered">
                        <thead class="bg-dark">
                            <tr>
                                <th class="small font-weight-bold text-light" scope="col">Mes</th>
                                <th class="small font-weight-bold text-light" scope="col">Horas</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let mes of mantoInformeSemanalConfService.getMonthNames(); let i=index">
                                <td class="small">{{mes}}</td>
                                <td class="small">
                                    <div *ngIf="mantoInformeSemanalConfService.getHorasUtilizadasValor(year, i+1) > 0; else noValorHoraUtilizada">
                                        <input id="inputHoraUtilizadas{{year}}{{i+1}}" type="number" class="form-control" value="{{mantoInformeSemanalConfService.getHorasUtilizadasValor(year, i+1)}}" />
                                    </div>
                                    <ng-template #noValorHoraUtilizada>
                                           0
                                    </ng-template>
                                </td>
                                <td class="MantoHorasConfAcciones">
                                    <div *ngIf="mantoInformeSemanalConfService.getHorasUtilizadasValor(year, i+1) > 0">
                                        <button class="btn" type="button" (click)="modificarHora(year, i+1, true)">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                    </div>
                                </td>
                                
                                <td class="MantoHorasConfAcciones">
                                    <div *ngIf="mantoInformeSemanalConfService.getHorasUtilizadasValor(year, i+1) > 0">
                                        <button class="btn" type="button" (click)="borrarHora(year, i+1, true)">
                                            <i class="fas fa-trash-alt"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr> 
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <div class="row justify-content-center">
        <div class="col-12 col-sm-6 ">
            <div class="row">
                <div class="col ">
                    <h4>Agregar Hora Utilizada</h4>
                </div>
            </div>
            <form autocomplete="off" [formGroup]="formularioHoraUtilizada" (ngSubmit)="agregarHoraUtilizada()">
                <div class="row my-3">
                    <div class="col-12 col-sm-4">
                        Fecha:
                    </div>
                    <div class="col-12 col-sm-8">
                        <input [class.is-invalid]="mesHoraUtilizadaNoValido" formControlName="mesHoraUtilizada" type="month" class="date form-control" min="{{fechaMinUtilizadas}}" max="{{fechaMaxUtilizadas}}" >
                        <small *ngIf="mesHoraUtilizadaNoValido" class="text-danger">Seleccione Fecha</small>
                    </div>
                </div>
 
                <div class="row my-3">
                    <div class="col-12 col-sm-4">
                        Valor:
                    </div>
                    <div class="col-12 col-sm-8">
                        <input [class.is-invalid]="valorHoraUtilizadaNoValido" formControlName="valorHoraUtilizada" type="number" class="form-control" >
                        <small *ngIf="valorHoraUtilizadaNoValido" class="text-danger">Debe ingresar un valor</small>
                    </div>
                </div>
           
                <div class="row my-3 mt-5">
                    <div class="col">
                        <button class="btn btn-primary btn-block" type="submit">Agregar</button>
                    </div>
                </div>
            </form>

        </div>
    </div>

    <hr>
</div>






